limit_width,search-detail,作者,limit_width1,日期,down,详情标题,日期时间,内容,qq_41110324,qq_44444359,miss_eins,sincerehz,weixin_40673372
5G接口,如有相关问题，请随时讨论交流betterfunan@126.com ]    看到各种大神对于5G协议的分享，收获颇多，现进行整理自己走读5G相关协议内容，内容可能不尽详实和准确，只能算作自己工作的记录。    注：由于作者初次使用，不会添加图片，故使用的是协议中图片。1 NG接口根据协议TS 38.410整理。1.1 通用特性N...,lei_shi,https://blog.csdn.net/lei_shi/article/details/79522384,2018-03-12,4288次阅读,5G接口 - lei_shi的博客,2018年03月12日 08:15:40,[版权声明：本文为博主原创文章，转载时请注明原文链接，谢谢。如有相关问题，请随时讨论交流betterfunan@126.com ]    看到各种大神对于5G协议的分享，收获颇多，现进行整理自己走读5G相关协议内容，内容可能不尽详实和准确，只能算作自己工作的记录。    注：由于作者初次使用，不会添加图片，故使用的是协议中图片。1 NG接口根据协议TS 38.410整理。1.1 通用特性NG架构NG RAN分为Radio Network Layer (RNL)和Transport Network Layer (TNL)，NG-RAN的架构（例如NG-RAN节点和节点间接口）属于RNL部分。NG-RAN架构由一系列gNBs和ng-eNB组成，与5GC通过NG接口（逻辑接口）相连。 NG-RAN与5GC间有许多NG接入点，每个NG接入点均独立满足NG需求。 NG-RAN node到5GC的NG-C逻辑接口选择由NAS Node Selection function决定；NG-RAN node到5GC的NG-U逻辑接口选择在5GC内完成，AMF发信号给NG-RAN node。 NG接口通则-         NG接口开放；-         NG接口支持NG-RAN和5GC间信息交互；-         NG是NG-RAN node和5GC node间的点对点逻辑接口（即使之间无直接物理连接）；-         NG接口支持控制面和用户面分离；-         NG接口分为RNL和TNL；-         NG接口能够向后演进支持更多新功能新服务需求；-         NG接口与NG-RAN部署相解耦；-         NG应用协议支持模块化设计和使用允许优化编码/解码效率的语法。 NG接口说明宗旨-         支持不同厂商的AMFs与多个NG-RAN间的连接；-         支持NG接口无线网络功能和传输网络功能分离便于引入新技术。 NG接口性能-         支持建立、维护和释放的NG-RAN（属于PDU sessions部分）流程；-         支持RAT内切换和RAT间切换流程；-         支持UE在协议级别上的分离（用于用户特定信号管理的）；-         支持UE和AMF间NAS信令消息的转发；-         支持数据包流的资源预留机制。1.2 NG接口功能NG接口功能    具体描述   寻呼功能    支持在寻呼区域内向NG-RAN节点发送寻呼请求。   UE上下文管理功能    支持在AMF和NG-RAN中建立修改释放UE上下文。   移动管理功能    ECM-CONNECTED状态下UE的移动功能包括支持NG-RAN内移动性的系统内切换和支持来/去EPS系统的系统间切换功能；涉及经由NG接口的切换准备、执行和完成三部分。   PDU会话管理功能    负责NG-RAN节点内需要UE上下文时PDU会话NG-RAN资源（用于用户数据传输）的建立、修改和释放。  NGAP通过AMF支持PDU会话相关信息的透传。   NAS转发功能    通过NG接口针对指定UE传输/路由NAS消息。   NAS节点选择功能    5GS架构中支持NG-RAN节点连接多个AMF；  根据AMF分配给UE的临时标识在NG-RAN节点侧确定与UE相关的AMF；若UE没有分配临时标识或者失效，NG-RAN节点则会根据切片信息确定AMF。   NG接口管理功能    保证NG接口操作的启动/重置；  处理应用部分执行的不同版本和协议错误。   告警消息发送功能    经由NG接口转发告警信息或者取消告警信息的持续广播。   配置转发功能    经由核心网允许两个RAN node间RAN配置信息的请求和转发。   Trace功能    控制NG-RAN节点内的trace会话。   AMF管理功能    支持AMF的计划取消。   过载功能    SA2中FFS   AMF负责均衡功能    SA2中FFS   1.3 NG接口信号过程NG接口支持经由控制面的信号过程，如下表所示：NG接口信号过程    具体描述   PDU会话管理过程    完成PDU会话的NG-RAN资源建立，释放或修改过程：  -           PDU会话资源建立  -           PDU会话资源释放  -           PDU会话资源修改  -           PDU会话资源通告  -           PDU会话资源修改指示   UE上下文管理过程    完成UE上下文建立，释放或修改过程：  -           初始上下文建立  -           UE上下文释放请求  -           UE上下文释放  -           UE上下文修改   NAS发送过程    完成AMF和UE间的NAS信令数据透传过程：  -           初始UE消息（NG-RAN node发起）  -           上行NAS传输（NG-RAN node发起）  -           下行NAS传输（AMF发起）  -           NAS无法传输指示（NG-RAN node发起）  -           重新路由NAS请求（AMF发起）   UE移动管理过程    完成UE移动切换的准备，执行或取消过程：  -           切换准备  -           切换资源分配  -           切换通知  -           路径切换请求  -           上行RAN状态转发  -           下行RAN状态转发  -           切换取消   寻呼过程    完成寻呼区域内向NG-RAN节点发送寻呼请求过程。   AMF管理过程    完成AMF告知NG-RAN节点AMF状态和去激活与指定UE  NGAP UE组合过程：  -           AMF状态指示  -           NGAP组合去激活（FFS）   NG接口管理过程    完成NG接口管理过程：  -           NG建立  -           RAN配置更新  -           AMF配置更新  -           NG重置  -           错误指示   1.4 NG接口协议结构NG控制面：NG接口控制面协议栈见TS38410-070_cl中图6.1-1，TNL建立在IP传输上，SCTP（Stream Control TransmissionProtocol，流控制传输协议）在IP上保证信令消息的可靠传输，应用层信号协议称为NGAP（NG Application Protocol）。TS380410-070下载地址：点击打开链接NG用户面：NG用户面接口在NG-RAN节点与UPF之间，提供NG-RAN节点和UPF间用户面PDU的非保证交付。NG-U协议栈见TS38410-070_cl中图6.2-1。2 Xn接口根据协议TS 38.420整理。2.1 通用特性Xn接口连接NG-RAN node。 Xn接口通则-         Xn接口开放；-         Xn接口支持两个NG-RANnode间信息交互，将PDU转发到各自的隧道端点；-         Xn是两个NG-RAN node间的点对点逻辑接口（即使之间无直接物理连接）。 Xn接口说明宗旨-         支持不同厂商的NG-RANnodes间连接；-         支持经由NG接口的NG-RAN nodes间的NG-RAN服务连续性-         支持Xn接口无线网络功能和传输网络功能分离便于引入新技术。 Xn接口性能-         支持NG-RAN内移动性过程；-         支持NG-RAN nodes间的双连接。2.2 Xn接口功能Xn接口    功能    具体功能    功能描述   Xn-C    Xn-C接口管理和差错处理功能    Xn建立功能    允许两个NG-RAN nodes间Xn接口的初始建立，包括应用层数据交互。   差错指示功能    允许应用层上一般错误情况上报。   Xn重置功能    允许NG-RAN node告知另一个NG-RAN node其已经从非正常失败状态恢复，第二个node内需要删除与第一个node相关的所有上下文（应用层数据除外）并释放伴生资源。   Xn配置数据更新功能    允许两个NG-RAN nodes随时更新应用层数据。   Xn移除功能    允许两个NG-RAN nodes删除各自的Xn接口。   UE移动管理功能    切换准备功能    允许源和目的NG-RAN  node间的信息交互从而完成给定UE到目的NG-RAN node初始切换。   切换取消功能    允许通知已准备好的目的NG-RAN  node准备的切换不进行，同时释放切换准备期间的资源分配。   恢复UE上下文功能    允许NG-RAN node从其他node恢复UE上下文。   RAN寻呼功能    允许NG-RAN node初始化非激活态UE的寻呼功能。   数据转发控制功能    允许源和目的NG-RAN  nodes间用于数据转发传输承载的建立和释放。   双连接功能    使能NG-RAN中辅助节点内额外资源的使用。   Xn-U    数据转发功能    允许NG-RAN  nodes间数据转发从而支持双连接和移动性操作。   流控制功能    允许NG-RAN node接收第二个node的用户面数据从而提供数据流相关的反馈信息。   2.3 Xn接口信号过程Xn接口支持经由控制面（Xn-C）和用户面（Xn-U）的信号过程，如下表所示：Xn接口    信号过程    具体描述   控制面协议过程    移动性管理过程    完成连接模式或者RRC非激活模式下UE的移动性管理过程：  -           切换准备  -           切换取消  -           SN状态转发  -           恢复UE上下文  -           RAN寻呼  -           数据转发地址指示  -           UE上下文释放   双连接过程    完成双连接中资源增加，修改和释放过程：  -           S-NG-RAN-node增加准备  -           S-NG-RAN-node重配完成  -           M-NG-RAN-node发起S-NG-RAN-node修改准备  -           S-NG-RAN-node发起S-NG-RAN-node修改  -           M-NG-RAN-node发起S-NG-RAN-node释放  -           S-NG-RAN-node发起S-NG-RAN-node释放  -           S-NG-RAN-node计数检查  -           RRC转发   全局过程    完成两个NG-RAN  nodes间配置级别数据交互过程：  -           Xn建立  -           NG-RAN-node配置更新   用户面协议过程    FFS   2.4 Xn接口协议结构Xn控制面：Xn接口控制面协议栈见TS38420-060_cl中图7.1-1，TNL建立在IP传输上，SCTP（Stream Control Transmission Protocol，流控制传输协议）在IP上保证信令消息的可靠传输，应用层信号协议称为XnAP（Xn Application Protocol）。TS380420-060下载地址：点击打开链接 Xn用户面：Xn用户面接口在两个NG-RAN节点之间，提供两个NG-RAN节点间用户面PDU的非保证交付。Xn-U协议栈见TS38420-060_cl中图7.2-1。 Xn接口的技术规范见TS38420-060_cl中图8.6.1。  3 F1接口根据协议TS 38.470整理。3.1 通用特性F1接口连接NG-RAN中gNB的gNB-CU和gNB-DU或者连接E-UTRAN中的en-gNB的gNB-CU和gNB-DU。F1接口通则-         F1接口开放；-         F1接口支持端点间信息交互，通知支持数据传输到各自端点；-         F1接口是两个端点间的点对点逻辑接口（即使之间无直接物理连接）；-         F1接口支持控制面和用户面分离；-         F1接口支持RNL和TNL分离；-         F1接口使能UE相关信息交互和非UE相关信息交互；-         F1接口能够向后演进支持更多新功能新服务需求；-         一个gNB-CU与1或多个gNB-DUs在外部视作一个gNB或者en-gNB，gNB终止于Xn接口和NG接口，en-gNB终止于X2接口和S1-U接口；-         gNB-CU分为控制面（CP）和用户面（UP）。 F1接口说明宗旨-         支持不同厂商的gNB-CU与gNB-DU间连接。。3.2 F1接口功能F1接口  功能  描述 F1-C  F1接口管理功能    系统信息管理功能    F1 UE上下文管理功能    RRC消息转发功能    F1-U  数据转发功能  允许gNB-CU与gNB-DU间用户数据转发。 流控制功能  允许下行用户数据流到gNB-DU的控制。   F1接口  功能  具体功能  功能描述 F1-C  F1接口管理功能  差错指示功能  允许gNB-CU/gNB-DU向gNB-DU/gNB-CU指示错误发生。 重置功能  在gNB-CU/gNB-DU中用于节点建立后和错误事件发生后的同等实体初始化。 F1建立功能  经F1接口允许gNB-CU和gNB-CU间的应用层数据交互；gNB-DU发起F1建立 gNB-CU+gNB-DU配置更新功能  允许gNB-CU和gNB-DU间应用层配置数据更新，激活/去激活小区。 系统信息管理功能  系统广播信息的调度在gNB-DU执行，gNB-DU根据获得的调度参数传输系统消息；gNB-DU负责NR-MIB编码，若需要广播SIB1和其他SI消息，gNB-DU负责SIB1编码，gNB-CU负责其他SI消息的编码。 F1 UE上下文管理功能  支持所需要的UE上下文建立和修改。  1.        gNB-CU发起F1 UE上下文建立，gNB-DU基于接入控制准则接受/拒绝（eg：资源无法获得则拒绝）；  2.        gNB-CU/gNB-DU发起F1 UE上下文修改，接收节点可接受/拒绝修改。  支持gNB-DU中之前建立的上下文释放。  1.        gNB-CU直接触发上下文释放或接收到gNB-DU的请求在触发上下文释放；  2.        UE进入RRC_IDLE或RRC_INACTIVE状态时gNB-CU请求gNB-DU释放UE上下文。  支持DRBs（Data Radio Bearer）和SRBs（Signaling Radio Bearer）管理（建立、修改和释放DRB、SRB资源）。  1.        gNB-CU触发DRB资源的建立和修改，gNB-DU基于gNB-DU提供的资源预留信息和QoS信息接受/拒绝；  2.        QoS流与无线承载间的映射由gNB-CU执行，经由F1的管理相关的承载粒度是无线承载级别，为了支持DU间CA的PDCP复制，一个数据无线承载应在gNB-CU与gNB-DU间配置两个GTP-U隧道。 RRC消息转发功能  允许gNB-CU与gNB-DU间RRC消息转发，gNB-CU负责使用gNB-DU提供的辅助信息对专用RRC消息编码 F1-U  数据转发功能  允许NG-RAN nodes间数据转发从而支持双连接和移动性操作。 流控制功能  允许NG-RAN node接收第二个node的用户面数据从而提供数据流相关的反馈信息。 3.3 F1接口信号过程F1接口支持的信号过程，如下表所示：F1接口  信号过程  具体描述 控制面协议过程  接口管理过程  -           重置过程  -           错误指示过程  -           F1建立过程  -           gNB-DU配置更新过程  -           gNB-CU配置更新过程 上下文管理过程  -           UE上下文建立过程  -           UE上下文建立释放请求过程（gNB-DU发起）  -           UE上下文建立释放过程（gNB-CU发起）  -           UE上下文建立修改过程（gNB-CU发起）  -           UE上下文建立修改必需过程（gNB-DU发起） RRC消息转发过程  -           UL RRC消息转发过程  -           DL RRC消息转发过程 用户面协议过程  FFS 3.4 F1接口协议结构F1控制面：F1接口控制面协议栈见TS38470-f00中图7.1-1，TNL建立在IP传输上，SCTP（Stream Control TransmissionProtocol，流控制传输协议）在IP上保证信令消息的可靠传输，应用层信号协议称为F1AP（F1 Application Protocol）。TS38470-f00下载地址：点击打开链接 F1用户面：F1用户面结构见TS38470-f00中图7.2-1。TNL基于IP传输，在IP之上包括UDP和GTP-U。,,,,,
